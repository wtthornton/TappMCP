<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TappMCP v2.0 - Technical Architecture Guide with Real-Time Monitoring</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --border-color: #e5e7eb;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 3rem 0;
            text-align: center;
            box-shadow: var(--shadow-lg);
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .header .subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }

        .nav {
            background: var(--bg-secondary);
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            justify-content: center;
        }

        .nav a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .nav a:hover {
            background: var(--primary-color);
            color: white;
        }

        .main-content {
            padding: 3rem 0;
        }

        .section {
            margin-bottom: 3rem;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 0.5rem;
        }

        .section h3 {
            color: var(--secondary-color);
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
        }

        .section h4 {
            color: var(--text-primary);
            font-size: 1.25rem;
            margin: 1.5rem 0 0.75rem 0;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid #334155;
        }

        .code-inline {
            background: var(--bg-secondary);
            color: var(--primary-color);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
        }

        .architecture-diagram {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .flow-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .flow-step {
            background: white;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            position: relative;
        }

        .flow-step::after {
            content: '‚Üí';
            position: absolute;
            right: -1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .flow-step:last-child::after {
            display: none;
        }

        .integration-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .integration-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .integration-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .integration-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
        }

        .integration-card h4 {
            color: var(--primary-color);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tech-emoji {
            font-size: 1.5rem;
        }

        .data-structure {
            background: #f8fafc;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
        }

        .highlight {
            background: linear-gradient(120deg, #fef3c7 0%, #fde68a 100%);
            padding: 0.1rem 0.3rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .collapsible {
            margin: 1rem 0;
        }

        .collapsible-header {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--primary-color);
        }

        .collapsible-header:hover {
            background: var(--accent-color);
            color: white;
        }

        .collapsible-content {
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
            display: none;
        }

        .collapsible.active .collapsible-content {
            display: block;
        }

        .toc {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
            border: 1px solid var(--border-color);
        }

        .toc h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            margin: 0.5rem 0;
        }

        .toc a {
            color: var(--text-primary);
            text-decoration: none;
            padding: 0.25rem 0;
            display: block;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .toc a:hover {
            background: var(--primary-color);
            color: white;
            padding-left: 0.5rem;
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .metric-card {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .metric-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }

            .integration-grid, .flow-diagram {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 0 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üîß TappMCP v2.0</h1>
            <p class="subtitle">Technical Architecture & Integration Guide</p>
            <p>Deep dive into technical flows, Context7 integration, and third-party MCP server connections</p>
        </div>
    </div>

    <nav class="nav">
        <div class="container">
            <ul>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#context7-integration">Context7 Integration</a></li>
                <li><a href="#mcp-integrations">MCP Integrations</a></li>
                <li><a href="#call-flows">Call Flows</a></li>
                <li><a href="#data-structures">Data Structures</a></li>
                <li><a href="#performance">Performance</a></li>
                <li><a href="#monitoring">Monitoring</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="toc">
                <h3>üìö Technical Guide Contents</h3>
                <ul>
                    <li><a href="#architecture">üèóÔ∏è System Architecture Overview</a></li>
                    <li><a href="#real-time-monitoring">üåê Real-Time Monitoring Architecture</a></li>
                    <li><a href="#context7-integration">üß† Context7 Integration Deep Dive</a></li>
                    <li><a href="#mcp-integrations">üîó Third-Party MCP Server Integrations</a></li>
                    <li><a href="#call-flows">üîÑ Technical Call Flows & Data Flow</a></li>
                    <li><a href="#data-structures">üìä Data Structures & Schemas</a></li>
                    <li><a href="#performance">‚ö° Performance & Caching Architecture</a></li>
                    <li><a href="#monitoring">üìà Monitoring & Health Checks</a></li>
                </ul>
            </div>

            <section id="architecture" class="section">
                <h2>üèóÔ∏è System Architecture Overview</h2>

                <p>TappMCP v2.0 is built on a sophisticated multi-layered architecture designed for AI assistant enhancement through Context7 intelligence and comprehensive MCP integrations.</p>

                <div class="architecture-diagram">
                    <h3>High-Level Architecture</h3>
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <h4>üéØ AI Assistant</h4>
                            <p>Cursor, Claude, etc.</p>
                        </div>
                        <div class="flow-step">
                            <h4>üîå MCP Protocol</h4>
                            <p>Model Context Protocol</p>
                        </div>
                        <div class="flow-step">
                            <h4>üõ†Ô∏è TappMCP Server</h4>
                            <p>7 Smart Tools</p>
                        </div>
                        <div class="flow-step">
                            <h4>üß† Context7 Broker</h4>
                            <p>Intelligence Layer</p>
                        </div>
                        <div class="flow-step">
                            <h4>üîó External MCPs</h4>
                            <p>Third-party Services</p>
                        </div>
                    </div>
                </div>

                <h3>Core Components</h3>
                <ul>
                    <li><strong>MCP Server</strong>: Model Context Protocol server with tool registry</li>
                    <li><strong>Context7Broker</strong>: Real Context7 integration with 30-day cache</li>
                    <li><strong>Context7Cache</strong>: Advanced caching with compression and analytics</li>
                    <li><strong>Unified Code Intelligence</strong>: Multi-category intelligence engines</li>
                    <li><strong>MCP Coordinator</strong>: Orchestrates external MCP services</li>
                    <li><strong>Health Monitoring</strong>: HTTP endpoints on port 3001</li>
                </ul>

                <h3>Technology Stack</h3>
                <div class="code-block">TypeScript (Strict Mode)
‚îú‚îÄ‚îÄ @modelcontextprotocol/sdk - MCP Protocol Implementation
‚îú‚îÄ‚îÄ lru-cache - Advanced Caching Layer
‚îú‚îÄ‚îÄ zlib - Data Compression
‚îú‚îÄ‚îÄ vitest - Testing Framework
‚îú‚îÄ‚îÄ docker - Containerization
‚îî‚îÄ‚îÄ node.js - Runtime Environment</div>
            </section>

            <section id="real-time-monitoring" class="section">
                <h2>üåê Real-Time Monitoring Architecture</h2>

                <p>TappMCP v2.0 includes a comprehensive real-time monitoring system with WebSocket-based dashboard, performance metrics, and intelligent notifications.</p>

                <h3>Monitoring Components</h3>
                <div class="architecture-diagram">
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <h4>üìä MetricsBroadcaster</h4>
                            <p>Collects and broadcasts real-time performance data</p>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <h4>üîå WebSocket Server</h4>
                            <p>Real-time communication with dashboard clients</p>
                        </div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-step">
                            <h4>üåê Dashboard</h4>
                            <p>Live monitoring interface at localhost:3000</p>
                        </div>
                    </div>
                </div>

                <h3>Performance Metrics Collection</h3>
                <ul>
                    <li><strong>Memory Usage</strong> - Heap used, heap total, external memory</li>
                    <li><strong>CPU Utilization</strong> - Process CPU usage and load averages</li>
                    <li><strong>Response Times</strong> - API endpoint response times and latency</li>
                    <li><strong>Cache Performance</strong> - Hit rates, miss rates, cache size</li>
                    <li><strong>Error Rates</strong> - Error counts and error rates by endpoint</li>
                    <li><strong>Active Connections</strong> - WebSocket connections and HTTP sessions</li>
                </ul>

                <h3>WebSocket Communication</h3>
                <div class="code-block">// WebSocket Event Types
{
  "type": "performance_metrics",
  "data": {
    "memory": { "used": 123456, "total": 234567 },
    "cpu": { "usage": 45.2 },
    "responseTime": { "average": 120, "p95": 250 },
    "timestamp": 1640995200000
  }
}

// Workflow Status Updates
{
  "type": "workflow_status",
  "data": {
    "workflowId": "workflow-123",
    "status": "running",
    "progress": 65,
    "currentPhase": "Code Generation",
    "startTime": 1640995200000
  }
}</div>

                <h3>Dashboard Features</h3>
                <ul>
                    <li><strong>Real-time Updates</strong> - Live data streaming via WebSocket</li>
                    <li><strong>Performance Charts</strong> - Memory, CPU, response time visualizations</li>
                    <li><strong>Workflow Tracking</strong> - Live workflow status with progress bars</li>
                    <li><strong>System Health</strong> - Uptime, version, connection status</li>
                    <li><strong>Notification Center</strong> - Real-time alerts and system notifications</li>
                    <li><strong>Auto-Reconnection</strong> - Handles connection drops gracefully</li>
                    <li><strong>Mobile Responsive</strong> - Works on desktop and mobile devices</li>
                </ul>

                <h3>Visual Status System</h3>
                <ul>
                    <li><strong>Status Icons</strong> - Comprehensive icon library for all status types</li>
                    <li><strong>Color Coding</strong> - Success (Green), Warning (Yellow), Error (Red), Info (Blue)</li>
                    <li><strong>Animations</strong> - Pulse, spin, bounce for dynamic states</li>
                    <li><strong>Priority Indicators</strong> - Visual priority levels for notifications</li>
                </ul>

                <h3>Smart Notifications</h3>
                <ul>
                    <li><strong>Multi-Channel</strong> - WebSocket, Email, Push, In-App</li>
                    <li><strong>Priority Levels</strong> - Critical, High, Medium, Low, Info</li>
                    <li><strong>Template System</strong> - Reusable notification templates</li>
                    <li><strong>User Preferences</strong> - Configurable notification settings</li>
                    <li><strong>Analytics</strong> - Delivery rates, read rates, engagement</li>
                </ul>
            </section>

            <section id="context7-integration" class="section">
                <h2>üß† Context7 Integration Deep Dive</h2>

                <p>Context7 integration provides AI assistants with enhanced domain expertise through intelligent caching and real-time knowledge retrieval.</p>

                <h3>Context7 Broker Architecture</h3>
                <div class="integration-grid">
                    <div class="integration-card">
                        <h4><span class="tech-emoji">üåê</span> HTTP Client</h4>
                        <p><strong>Real-time API calls</strong> to Context7 service for up-to-date documentation and best practices.</p>
                        <div class="data-structure">Context7HttpClient
‚îú‚îÄ‚îÄ Documentation retrieval
‚îú‚îÄ‚îÄ Code examples
‚îú‚îÄ‚îÄ Best practices
‚îî‚îÄ‚îÄ Troubleshooting guides</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üîå</span> MCP Client</h4>
                        <p><strong>MCP protocol integration</strong> with HTTP fallback for robust connectivity.</p>
                        <div class="data-structure">Context7MCPClient
‚îú‚îÄ‚îÄ MCP protocol communication
‚îú‚îÄ‚îÄ HTTP fallback mechanism
‚îú‚îÄ‚îÄ Connection health monitoring
‚îî‚îÄ‚îÄ Automatic retry logic</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üíæ</span> LRU Cache</h4>
                        <p><strong>30-day persistent cache</strong> with 95% API cost reduction and intelligent compression.</p>
                        <div class="data-structure">LRUCache Configuration
‚îú‚îÄ‚îÄ Max size: 1000 entries
‚îú‚îÄ‚îÄ TTL: 720 hours (30 days)
‚îú‚îÄ‚îÄ Compression: gzip enabled
‚îî‚îÄ‚îÄ Auto-save: Every 10 writes</div>
                    </div>
                </div>

                <h3>Context7 Cache System</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>Advanced Caching Implementation</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>Cache Configuration</h4>
                        <div class="code-block">interface Context7CacheConfig {
  maxCacheSize: number;           // 1000 entries
  defaultExpiryHours: number;    // 720 hours (30 days)
  enableVersionChecking: boolean; // true
  enableHitTracking: boolean;    // true
  enableCompression: boolean;    // true
}</div>

                        <h4>Cache Performance</h4>
                        <div class="performance-metrics">
                            <div class="metric-card">
                                <div class="metric-value">95%</div>
                                <div class="metric-label">API Cost Reduction</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">&lt;100ms</div>
                                <div class="metric-label">Cache Retrieval</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">30d</div>
                                <div class="metric-label">Cache TTL</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">gzip</div>
                                <div class="metric-label">Compression</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>Data Flow for Context7 Integration</h3>
                <div class="flow-diagram">
                    <div class="flow-step">
                        <h4>1. Request</h4>
                        <p>AI Assistant calls smart tool</p>
                    </div>
                    <div class="flow-step">
                        <h4>2. Cache Check</h4>
                        <p>LRU cache lookup</p>
                    </div>
                    <div class="flow-step">
                        <h4>3. Context7 Call</h4>
                        <p>API call if cache miss</p>
                    </div>
                    <div class="flow-step">
                        <h4>4. Cache Store</h4>
                        <p>Store with compression</p>
                    </div>
                    <div class="flow-step">
                        <h4>5. Response</h4>
                        <p>Enhanced AI response</p>
                    </div>
                </div>
            </section>

            <section id="mcp-integrations" class="section">
                <h2>üîó Third-Party MCP Server Integrations</h2>

                <p>TappMCP integrates with multiple third-party MCP servers to provide comprehensive external knowledge and capabilities.</p>

                <h3>External MCP Servers</h3>
                <div class="integration-grid">
                    <div class="integration-card">
                        <h4><span class="tech-emoji">üìÅ</span> FileSystem MCP Server</h4>
                        <p><strong>File system operations</strong> for project analysis and file management.</p>
                        <div class="data-structure">Command: npx @modelcontextprotocol/server-filesystem@latest
Status: ‚úÖ Available
Fallback: None (Real server)
Capabilities: File read/write, directory listing</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üåê</span> Web Search Broker</h4>
                        <p><strong>Real-time web search</strong> for current information and trends.</p>
                        <div class="data-structure">WebSearchBroker
‚îú‚îÄ‚îÄ Search results
‚îú‚îÄ‚îÄ Trend analysis
‚îú‚îÄ‚îÄ Market validation
‚îî‚îÄ‚îÄ Real-time data</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üß†</span> Memory Broker</h4>
                        <p><strong>Pattern recognition</strong> and learning from previous interactions.</p>
                        <div class="data-structure">MemoryBroker
‚îú‚îÄ‚îÄ Lessons learned
‚îú‚îÄ‚îÄ Pattern recognition
‚îú‚îÄ‚îÄ Insights generation
‚îî‚îÄ‚îÄ Knowledge persistence</div>
                    </div>
                </div>

                <h3>MCP Coordinator Architecture</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>MCP Coordinator Implementation</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>External Knowledge Interface</h4>
                        <div class="code-block">interface ExternalKnowledge {
  id: string;
  source: 'context7' | 'websearch' | 'memory';
  type: 'documentation' | 'example' | 'best-practice' |
        'search' | 'trend' | 'lesson' | 'pattern' | 'insight';
  title: string;
  content: string;
  relevanceScore: number;
  retrievalTime: number;
  metadata: Record<string, unknown>;
}</div>

                        <h4>Knowledge Request Flow</h4>
                        <div class="code-block">interface KnowledgeRequest {
  projectId: string;
  businessRequest: string;
  domain: string;
  priority: 'low' | 'medium' | 'high' | 'critical';
  sources: {
    context7: boolean;
    websearch: boolean;
    memory: boolean;
  };
  maxResults: number;
  timeout: number;
}</div>
                    </div>
                </div>
            </section>

            <section id="call-flows" class="section">
                <h2>üîÑ Technical Call Flows & Data Flow</h2>

                <p>Detailed technical flows showing how requests move through the TappMCP system and integrate with external services.</p>

                <h3>Smart Tool Call Flow</h3>
                <div class="flow-diagram">
                    <div class="flow-step">
                        <h4>1. MCP Request</h4>
                        <p>AI Assistant ‚Üí MCP Protocol</p>
                    </div>
                    <div class="flow-step">
                        <h4>2. Tool Handler</h4>
                        <p>Route to smart tool</p>
                    </div>
                    <div class="flow-step">
                        <h4>3. Context7 Query</h4>
                        <p>Enhanced intelligence</p>
                    </div>
                    <div class="flow-step">
                        <h4>4. External MCPs</h4>
                        <p>Additional knowledge</p>
                    </div>
                    <div class="flow-step">
                        <h4>5. Response</h4>
                        <p>Enhanced AI response</p>
                    </div>
                </div>

                <h3>Context7 Integration Flow</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>Detailed Context7 Call Flow</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>Step 1: Request Processing</h4>
                        <div class="code-block">// 1. AI Assistant calls smart_vibe
smart_vibe "create a React todo app"

// 2. MCP server receives request
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "smart_vibe",
    "arguments": {
      "command": "create a React todo app"
    }
  }
}</div>

                        <h4>Step 2: Context7 Cache Check</h4>
                        <div class="code-block">// 3. Check LRU cache first
const cacheKey = generateCacheKey(request);
const cached = context7Cache.get(cacheKey);

if (cached && !isExpired(cached)) {
  return enhanceResponse(cached.data);
}</div>

                        <h4>Step 3: Context7 API Call</h4>
                        <div class="code-block">// 4. If cache miss, call Context7
const context7Response = await context7Broker.getDocumentation({
  query: "React todo app best practices",
  technology: "React",
  category: "frontend"
});</div>

                        <h4>Step 4: Cache Storage</h4>
                        <div class="code-block">// 5. Store in cache with compression
const compressedData = await gzipAsync(JSON.stringify(context7Response));
context7Cache.set(cacheKey, {
  data: compressedData,
  timestamp: Date.now(),
  expiry: Date.now() + (30 * 24 * 60 * 60 * 1000) // 30 days
});</div>
                    </div>
                </div>

                <h3>MCP Server Integration Flow</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>Third-Party MCP Integration Flow</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>FileSystem MCP Integration</h4>
                        <div class="code-block">// 1. Spawn FileSystem MCP server
const filesystemProcess = spawn('npx', [
  '@modelcontextprotocol/server-filesystem@latest',
  process.cwd()
]);

// 2. Send MCP request
const mcpRequest = {
  jsonrpc: "2.0",
  id: 1,
  method: "tools/call",
  params: {
    name: "read_file",
    arguments: { path: "./package.json" }
  }
};

// 3. Process response
filesystemProcess.stdin.write(JSON.stringify(mcpRequest));</div>

                        <h4>Web Search Integration</h4>
                        <div class="code-block">// Web search for current trends
const searchResults = await webSearchBroker.search({
  query: "React 18 best practices 2024",
  maxResults: 5,
  includeTrends: true
});</div>
                    </div>
                </div>
            </section>

            <section id="data-structures" class="section">
                <h2>üìä Data Structures & Schemas</h2>

                <p>Core data structures and schemas used throughout the TappMCP system for type safety and consistency.</p>

                <h3>Core Tool Schemas</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>Smart Tool Input/Output Schemas</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>Smart Vibe Schema</h4>
                        <div class="code-block">const SmartVibeInputSchema = z.object({
  command: z.string().min(1, 'Command is required'),
  options: z.object({
    role: z.enum(['developer', 'designer', 'qa-engineer',
                  'operations-engineer', 'product-strategist']).optional(),
    quality: z.enum(['basic', 'standard', 'enterprise']).optional(),
    verbosity: z.enum(['minimal', 'standard', 'detailed']).optional(),
    mode: z.enum(['simple', 'advanced']).optional()
  }).optional()
});</div>

                        <h4>Context7 Documentation Schema</h4>
                        <div class="code-block">interface Documentation {
  id: string;
  title: string;
  content: string;
  url?: string;
  version?: string;
  lastUpdated: Date;
  relevanceScore: number;
}</div>

                        <h4>Code Generation Result Schema</h4>
                        <div class="code-block">const CodeGenerationResultSchema = z.object({
  code: z.string().describe('Generated code'),
  technology: z.string().describe('Technology used'),
  category: z.string().describe('Category of the technology'),
  qualityScore: z.object({
    overall: z.number(),
    message: z.string().optional(),
    breakdown: z.any().optional()
  }),
  insights: z.any().optional(),
  metadata: z.object({
    processingTime: z.number(),
    engineUsed: z.string(),
    context7Enhanced: z.boolean()
  })
});</div>
                    </div>
                </div>

                <h3>Cache Data Structures</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>Advanced Caching Data Structures</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>Cached Data Entry</h4>
                        <div class="code-block">interface CachedData {
  data: ExternalKnowledge[];
  timestamp: number;
  expiry: number;
  version: string;
  hitCount: number;
  lastAccessed: number;
  compressed?: boolean;
}</div>

                        <h4>Cache Statistics</h4>
                        <div class="code-block">interface CacheStats {
  totalHits: number;
  totalMisses: number;
  hitRate: number;
  averageRetrievalTime: number;
  totalSize: number;
  compressionRatio: number;
  lastCleanup: Date;
}</div>
                    </div>
                </div>
            </section>

            <section id="performance" class="section">
                <h2>‚ö° Performance & Caching Architecture</h2>

                <p>TappMCP implements sophisticated performance optimizations through multi-layer caching and intelligent data management.</p>

                <h3>Performance Metrics</h3>
                <div class="performance-metrics">
                    <div class="metric-card">
                        <div class="metric-value">&lt;100ms</div>
                        <div class="metric-label">Tool Execution</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">95%</div>
                        <div class="metric-label">Cache Hit Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">30d</div>
                        <div class="metric-label">Cache TTL</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">gzip</div>
                        <div class="metric-label">Compression</div>
                    </div>
                </div>

                <h3>Caching Architecture</h3>
                <div class="integration-grid">
                    <div class="integration-card">
                        <h4><span class="tech-emoji">üíæ</span> LRU Cache Layer</h4>
                        <p><strong>In-memory caching</strong> with intelligent eviction policies and hit tracking.</p>
                        <div class="data-structure">LRU Configuration
‚îú‚îÄ‚îÄ Max size: 1000 entries
‚îú‚îÄ‚îÄ TTL: 720 hours (30 days)
‚îú‚îÄ‚îÄ Hit tracking: Enabled
‚îî‚îÄ‚îÄ Auto-cleanup: Every 10 writes</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üóúÔ∏è</span> Compression Layer</h4>
                        <p><strong>gzip compression</strong> for storage optimization and faster I/O operations.</p>
                        <div class="data-structure">Compression Stats
‚îú‚îÄ‚îÄ Average ratio: 70%
‚îú‚îÄ‚îÄ Algorithm: gzip
‚îú‚îÄ‚îÄ Auto-compress: &gt;1KB
‚îî‚îÄ‚îÄ Decompression: &lt;5ms</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üìÅ</span> Persistence Layer</h4>
                        <p><strong>File-based persistence</strong> with automatic save/load and corruption recovery.</p>
                        <div class="data-structure">Persistence Config
‚îú‚îÄ‚îÄ File: ./cache/context7-cache.json
‚îú‚îÄ‚îÄ Auto-save: Every 10 writes
‚îú‚îÄ‚îÄ Backup: .bak files
‚îî‚îÄ‚îÄ Recovery: Automatic</div>
                    </div>
                </div>

                <h3>Performance Optimization Strategies</h3>
                <ul>
                    <li><strong>Cache Warming</strong>: Pre-load frequently accessed data</li>
                    <li><strong>Lazy Loading</strong>: Load data only when needed</li>
                    <li><strong>Compression</strong>: Reduce memory and storage usage</li>
                    <li><strong>Batch Operations</strong>: Group multiple operations together</li>
                    <li><strong>Connection Pooling</strong>: Reuse external connections</li>
                    <li><strong>Circuit Breaker</strong>: Prevent cascade failures</li>
                </ul>
            </section>

            <section id="monitoring" class="section">
                <h2>üìà Monitoring & Health Checks</h2>

                <p>Comprehensive monitoring and health check system for production deployment and troubleshooting.</p>

                <h3>Health Check Endpoints</h3>
                <div class="collapsible">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <span>Health Check Implementation</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="collapsible-content">
                        <h4>GET /health - Detailed Health Status</h4>
                        <div class="code-block">{
  "status": "healthy",
  "timestamp": "2025-09-11T20:30:05.740Z",
  "uptime": 4.171793517,
  "memory": {
    "rss": 64421888,
    "heapTotal": 18071552,
    "heapUsed": 11697832
  },
  "version": "0.1.0",
  "services": {
    "context7": "connected",
    "mcpServers": "3 active",
    "cache": "operational"
  }
}</div>

                        <h4>GET /ready - Readiness Check</h4>
                        <div class="code-block">{
  "status": "ready",
  "timestamp": "2025-09-11T20:30:36.458Z",
  "checks": {
    "database": "ok",
    "externalServices": "ok",
    "cache": "ok"
  }
}</div>
                    </div>
                </div>

                <h3>Docker Health Monitoring</h3>
                <div class="code-block"># Docker health check configuration
healthcheck:
  test: ["CMD", "node", "-e",
    "require('http').get('http://localhost:3001/health',
     (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"]
  interval: 30s
  timeout: 10s
  retries: 3
  start_period: 40s</div>

                <h3>Performance Monitoring</h3>
                <div class="integration-grid">
                    <div class="integration-card">
                        <h4><span class="tech-emoji">üìä</span> Cache Metrics</h4>
                        <p>Real-time cache performance and hit rates.</p>
                        <div class="data-structure">Cache Statistics
‚îú‚îÄ‚îÄ Hit rate: 95%
‚îú‚îÄ‚îÄ Miss rate: 5%
‚îú‚îÄ‚îÄ Avg retrieval: 45ms
‚îî‚îÄ‚îÄ Total entries: 847</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">üîó</span> MCP Connections</h4>
                        <p>External MCP server connection status and performance.</p>
                        <div class="data-structure">MCP Server Status
‚îú‚îÄ‚îÄ FileSystem: ‚úÖ Active
‚îú‚îÄ‚îÄ WebSearch: ‚úÖ Active
‚îú‚îÄ‚îÄ Memory: ‚úÖ Active
‚îî‚îÄ‚îÄ Context7: ‚úÖ Connected</div>
                    </div>

                    <div class="integration-card">
                        <h4><span class="tech-emoji">‚ö°</span> Performance</h4>
                        <p>System performance metrics and resource usage.</p>
                        <div class="data-structure">Performance Stats
‚îú‚îÄ‚îÄ CPU usage: 15%
‚îú‚îÄ‚îÄ Memory: 64MB
‚îú‚îÄ‚îÄ Response time: 85ms
‚îî‚îÄ‚îÄ Throughput: 120 req/min</div>
                    </div>
                </div>

                <h3>Logging and Debugging</h3>
                <div class="code-block"># Enable debug logging
export DEBUG=tappmcp:*

# View logs
docker logs tappmcp-smart-mcp-1

# Monitor in real-time
docker logs -f tappmcp-smart-mcp-1</div>
            </section>
        </div>
    </main>

    <footer style="background: var(--text-primary); color: white; text-align: center; padding: 2rem 0; margin-top: 3rem;">
        <div class="container">
            <h2>üîß Technical Excellence with TappMCP v2.0</h2>
            <p>Advanced architecture, intelligent caching, and seamless integrations for AI assistant enhancement.</p>
            <p><strong>Built for developers, by developers.</strong></p>
        </div>
    </footer>

    <script>
        function toggleCollapsible(header) {
            const collapsible = header.parentElement;
            const content = collapsible.querySelector('.collapsible-content');
            const arrow = header.querySelector('span:last-child');

            if (collapsible.classList.contains('active')) {
                collapsible.classList.remove('active');
                content.style.display = 'none';
                arrow.textContent = '‚ñº';
            } else {
                collapsible.classList.add('active');
                content.style.display = 'block';
                arrow.textContent = '‚ñ≤';
            }
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Highlight current section in navigation
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav a');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
